glEnable(GL_DEPTH_TEST);
glEnable(GL_STENCIL_TEST);
glStencilOp(GL_KEEP, GL_KEEP, GL_REPLACE);  
  

While
{
	glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT); 
 
	glStencilMask(0x00); // убеждаемся, что мы не обновляем буфер трафарета во время рисования пола
	normalShader.use();
	DrawFloor()  
  
	glStencilFunc(GL_ALWAYS, 1, 0xFF); 
	glStencilMask(0xFF); 
	DrawTwoContainers();
  
	glStencilFunc(GL_NOTEQUAL, 1, 0xFF);
	glStencilMask(0x00); 
	glDisable(GL_DEPTH_TEST);
	shaderSingleColor.use(); 
	DrawTwoScaledUpContainers();
	glStencilMask(0xFF);
	glStencilFunc(GL_ALWAYS, 1, 0xFF);   
	glEnable(GL_DEPTH_TEST);  
}